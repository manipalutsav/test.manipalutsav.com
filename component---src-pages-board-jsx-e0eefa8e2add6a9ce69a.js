(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"/vcH":function(e,t,a){"use strict";var s=a("t3Un"),n=a("dQqo");t.a={get:async()=>{let e=await Object(s.a)("/leaderboard");return e&&200===e.status?e.data:(e&&401===e.status&&Object(n.a)("Your session has expired, please logout and login again."),[])},getPublic:async()=>{let e=await Object(s.a)("/leaderboard/public");return e&&200===e.status?e.data:(e&&401===e.status&&Object(n.a)("Your session has expired, please logout and login again."),[])},getRound:async(e,t)=>{let a=await Object(s.a)("/events/"+e+"/rounds/"+t+"/leaderboard");return a&&200===a.status?a.data:(a&&401===a.status&&Object(n.a)("Your session has expired, please logout and login again."),[])},getWinners:async(e,t)=>{let a=await Object(s.a)("/leaderboard/winners");return a&&200===a.status?a.data:(a&&401===a.status&&Object(n.a)("Your session has expired, please logout and login again."),[])},publish:async e=>{let t=await Object(s.a)("/leaderboard/publish","POST",e);return t&&200===t.status?t.data:(t&&401===t.status&&Object(n.a)("Your session has expired, please logout and login again."),[])}}},DDnO:function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return l}));var s=a("dI71"),n=a("q1tI");const o=t=>e.createElement("input",{className:"mucapp",onChange:e=>t.onChange(e.target),autoComplete:"off",name:t.name,type:t.type,min:t.min,max:t.max,value:t.value,readOnly:t.disabled,placeholder:t.placeholder,css:{...t.styles}});let l=function(t){function a(){for(var e,a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))||this).state={value:""},e}Object(s.a)(a,t);var n=a.prototype;return n.componentWillReceiveProps=function(e){this.setState({value:e.children})},n.render=function(){let t=this.props;return e.createElement("textarea",{className:"mucapp",onChange:e=>t.onChange(e.target),autoComplete:"off",name:t.name,type:t.type,placeholder:t.placeholder,css:{...t.styles},value:this.state.value})},a}(a.n(n).a.Component);const r=t=>e.createElement("button",{css:{...t.styles,margin:2},className:"mucapp",onClick:t.onClick,disabled:!!t.disabled&&"disabled"},t.children)}).call(this,a("iMUK"))},JX7q:function(e,t,a){"use strict";function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}a.d(t,"a",(function(){return s}))},PN5U:function(e,t,a){"use strict";var s=a("t3Un"),n=a("ydnR"),o=a("ul+t");t.a={create:async e=>{let t=await Object(s.a)("/colleges","POST",e);return t&&200===t.status?t.data:(t&&"401"===t.status&&Object(o.a)("Your session has expired, please logout and login again."),null)},update:async e=>{let t=await Object(s.a)("/colleges","PATCH",e);return t&&200===t.status?t:(t&&"401"===t.status&&Object(o.a)("Your session has expired, please logout and login again."),null)},get:async e=>{try{let t=await Object(s.a)("/colleges/"+e);return t&&200===t.status?t.data:(t&&"401"===t.status&&Object(o.a)("Your session has expired, please logout and login again."),null)}catch(t){Object(o.a)(t.message)}},getAll:async()=>{let e=await Object(s.a)("/colleges");return e&&200===e.status?e.data:(e&&"401"===e.status&&Object(o.a)("Your session has expired, please logout and login again."),[])},getTeams:async e=>{let t;return t=e?await Object(s.a)("/colleges/"+e+"/teams"):await Object(s.a)("/colleges/teams"),t&&200===t.status?t.data:(t&&"401"===t.status&&Object(o.a)("Your session has expired, please logout and login again."),[])},getParticipants:async e=>{let t;return t=e?await Object(s.a)("/colleges/"+e+"/participants"):await Object(s.a)("/colleges/participants"),t&&200===t.status?t.data:(t&&"401"===t.status&&Object(o.a)("Your session has expired, please logout and login again."),[])},getCollege:async e=>{try{let t="undefined"!=typeof window&&await window.fetch(n.b.server+"/colleges/"+e,{credentials:"include"}),a=await t.json();if(200===a.status)return a.data;Object(o.a)(a.message)}catch(t){Object(o.a)(t.message)}},getAllEventRankings:async e=>{let t;return e&&(t=await Object(s.a)("/colleges/"+e+"/rankings")),t&&200===t.status?t.data:(t&&"401"===t.status&&Object(o.a)("Your session has expired, please logout and login again."),[])},getPublishedEventRankings:async e=>{let t;return e&&(t=await Object(s.a)("/colleges/"+e+"/public-rankings")),t&&200===t.status?t.data:(t&&"401"===t.status&&Object(o.a)("Your session has expired, please logout and login again."),[])}}},dwAi:function(e,t,a){"use strict";a.r(t),function(e){a.d(t,"default",(function(){return O}));var s=a("JX7q"),n=a("dI71"),o=a("q1tI"),l=a.n(o),r=a("zHrm"),i=a("vbt8"),u=a("/vcH"),c=a("PN5U"),d=a("DDnO"),g=a("bk+A"),b=a("Wbzz");const p=[{name:"Cultural Coordination Committee",location:"Manipal"},{name:"Kasturba Hospital",location:"Manipal"},{name:"MAHE",location:"Manipal"}],h=["Staff Cooking: Vegetarian","Staff Cooking: Non-Vegetarian","Staff Cooking: Sweets and Desserts","Staff Vegetable & Fruit Carving","Staff Variety Entertainment","Poetry (Kannada)"];let O=function(t){function a(a){var n;return(n=t.call(this,a)||this).state={status:"...",events:[],colleges:[],set:[],total:{}},n.render=()=>e.createElement(r.a,null,e.createElement("h1",{className:"mucapp"}," Leaderboard"),e.createElement("div",{className:"no-print"},n.state.status,n.state.showButton?e.createElement(d.a,{onClick:n.sortByRank,styles:{marginLeft:20}},"Sort By Rank"):"",n.state.showButton?e.createElement(d.a,{onClick:n.sortByName,styles:{marginLeft:20}},"Sort By College Name"):""),e.createElement("div",{className:"leaderboardContainer",style:{overflow:"scroll"}},e.createElement("table",{className:"leaderboard"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Â "),n.state.events.map((t,a)=>e.createElement("th",{key:a},t.name)),e.createElement("th",null,"Total"))),e.createElement("tbody",null,n.state.colleges.map((t,a)=>e.createElement("tr",{key:a},e.createElement("th",null,t.name,",",t.location),n.state.events.map((a,s)=>e.createElement("th",{key:s},n.getPoints(a,t))),e.createElement("th",null,n.getTotal(t)))))))),n.getPoints=n.getPoints.bind(Object(s.a)(n)),n.sortByRank=n.sortByRank.bind(Object(s.a)(n)),n.sortByName=n.sortByName.bind(Object(s.a)(n)),n}Object(n.a)(a,t);var o=a.prototype;return o.componentWillMount=function(){1<Object(g.d)().type?Object(b.c)("/"):this.init()},o.init=async function(){await this.setState({status:"Fetching events..."});let e=await i.a.getAll();e=e.sort((e,t)=>e.startDate<t.startDate?-1:e.startDate>t.startDate?1:0),e=e.filter(e=>null==h.find(t=>t==e.name)),await this.setState({status:"Fetching colleges",events:e});let t=await c.a.getAll();t=t.sort((e,t)=>e.name<t.name?-1:e.name>t.name?1:0),t=t.filter(e=>null==p.find(t=>t.name==e.name&&t.location==e.location)),await this.setState({colleges:t});let a=[];for(let n=0;n<e.length;n++){let t=e[n];t.faculty||(await this.setState({status:"Fetching  "+t.name+" leaderboard..."}),0!=t.rounds.length&&((await u.a.getRound(t.id,t.rounds[t.rounds.length-1])).forEach(e=>{e.rank<=3&&a.push({college:e.slot.college,event:t.id,rank:e.rank})}),this.setState({set:a})))}let s={};t.forEach(e=>{s[e.id]=this.getTotal(e)}),this.setState({status:"Done",showButton:!0,total:s})},o.getPoints=function(e,t){let a=this.state.set.filter(a=>a.college._id===t.id&&a.event===e.id),s=0;return a.forEach(t=>{if(e.maxMembersPerTeam>1)switch(t.rank){case 1:s+=14;break;case 2:s+=10;break;case 3:s+=8;break;default:s+=0}else switch(t.rank){case 1:s+=10;break;case 2:s+=8;break;case 3:s+=6;break;default:s+=0}}),s>0?s:""},o.getTotal=function(e){let t=this.state.set.filter(t=>t.college._id===e.id),a=0;return t.forEach(e=>{if(this.state.events.find(t=>t.id===e.event).maxMembersPerTeam>1)switch(e.rank){case 1:a+=14;break;case 2:a+=10;break;case 3:a+=8;break;default:a+=0}else switch(e.rank){case 1:a+=10;break;case 2:a+=8;break;case 3:a+=6;break;default:a+=0}}),a},o.sortByRank=function(){let e=this.state.colleges.sort((e,t)=>this.state.total[t.id]-this.state.total[e.id]);this.setState({colleges:e})},o.sortByName=function(){let e=this.state.colleges.sort((e,t)=>e.name<t.name?-1:e.name>t.name?1:0);this.setState({colleges:e})},a}(l.a.Component)}.call(this,a("iMUK"))},vbt8:function(e,t,a){"use strict";var s=a("t3Un"),n=a("ul+t");t.a={create:async e=>{let t=await Object(s.a)("/events","POST",e);return t&&200===t.status?t.data:(t&&"401"===t.status&&Object(n.a)("Your session has expired, please logout and login again."),null)},createRound:async(e,t)=>{let a=await Object(s.a)("/events/"+e+"/rounds","POST",t);return a&&200===a.status?a.data:(a&&"401"===a.status&&Object(n.a)("Your session has expired, please logout and login again."),null)},createScores:async(e,t,a,o)=>{try{let l=await Object(s.a)("/events/"+e+"/rounds/"+t+"/judges/"+a,"POST",o);return console.log({response:l}),!(!l||200!==l.status)||(l&&"401"===l.status?Object(n.a)("Your session has expired, please logout and login again."):Object(n.a)(l.message),!1)}catch(l){return console.log(l),!1}},createSlots:async(e,t)=>{let a=await Object(s.a)("/events/"+e+"/rounds/"+t+"/slots","POST");return a&&200===a.status?a.data:(a&&"401"===a.status&&Object(n.a)("Your session has expired, please logout and login again."),[])},createSlots2:async(e,t)=>{let a=await Object(s.a)("/events/"+e+"/rounds/"+t+"/slots2","POST");return a?200===a.status?a.data:"401"===a.status?(Object(n.a)("Your session has expired, please logout and login again."),a&&404===a.status&&Object(n.a)("API not found"),[]):(Object(n.a)(a.message),[]):(Object(n.a)("Slotting: No response recieved"),[])},createTeam:async(e,t)=>{let a=await Object(s.a)("/events/"+e+"/teams","POST",t);return a&&200===a.status?a.data:(a&&"401"===a.status&&Object(n.a)("Your session has expired, please logout and login again."),null)},deleteRound:async(e,t)=>{let a=await Object(s.a)("/events/"+e+"/rounds/"+t,"DELETE");return a&&200===a.status?a.data:(a&&"401"===a.status&&Object(n.a)("Your session has expired, please logout and login again."),null)},deleteTeam:async(e,t)=>{let a=await Object(s.a)("/events/"+e+"/teams/"+t,"DELETE");return!(!a||200!==a.status)||(a&&"401"===a.status?Object(n.a)("Your session has expired, please logout and login again."):a&&400===a.status&&Object(n.a)(a.message),null)},get:async e=>{let t=await Object(s.a)("/events/"+e);return t&&200===t.status?t.data:(t&&"401"===t.status&&Object(n.a)("Your session has expired, please logout and login again."),null)},getAll:async()=>{let e=await Object(s.a)("/events");return e&&200===e.status?e.data:(e&&"401"===e.status&&Object(n.a)("Your session has expired, please logout and login again."),[])},getRound:async(e,t)=>{let a=await Object(s.a)("/events/"+e+"/rounds/"+t);return a&&200===a.status?a.data:(a&&"401"===a.status&&Object(n.a)("Your session has expired, please logout and login again."),null)},getScores:async(e,t,a)=>{let o=await Object(s.a)("/events/"+e+"/rounds/"+t+"/judges/"+a,"GET");return o&&200===o.status?o.data:(o&&"401"===o.status&&Object(n.a)("Your session has expired, please logout and login again."),null)},getRounds:async e=>{let t=await Object(s.a)("/events/"+e+"/rounds");return t&&200===t.status?t.data:(t&&"401"===t.status&&Object(n.a)("Your session has expired, please logout and login again."),[])},getSlots:async(e,t)=>{let a=await Object(s.a)("/events/"+e+"/rounds/"+t+"/slots");return a&&200===a.status?a.data:(a&&"401"===a.status&&Object(n.a)("Your session has expired, please logout and login again."),[])},getSlots2:async(e,t)=>{let a=await Object(s.a)("/events/"+e+"/rounds/"+t+"/slots2");return a&&200===a.status?a.data:(a&&"401"===a.status&&Object(n.a)("Your session has expired, please logout and login again."),a&&404===a.status&&Object(n.a)("Api not found"),[])},deleteSlots2:async(e,t)=>{let a=await Object(s.a)("/events/"+e+"/rounds/"+t+"/slots2/delete");return!(!a||200!==a.status)||(a&&"401"===a.status&&Object(n.a)("Your session has expired, please logout and login again."),a&&404===a.status&&Object(n.a)("Api not found"),!1)},getTeams:async e=>{let t=await Object(s.a)("/events/"+e+"/teams");return t&&200===t.status?t.data:[]},getTeamsByRound:async(e,t)=>{let a=await Object(s.a)("/events/"+e+"/rounds/"+t+"/teams");return a&&200===a.status?a.data:(a&&"401"===a.status&&Object(n.a)("Your session has expired, please logout and login again."),[])},updateRound:async(e,t,a)=>{let o=await Object(s.a)("/events/"+e+"/rounds/"+t,"POST",a);return o&&200===o.status?o.data:(o&&"401"===o.status&&Object(n.a)("Your session has expired, please logout and login again."),null)},updateTeam:async(e,t,a)=>{let o=await Object(s.a)("/events/"+e+"/teams/"+t,"PATCH",a);return o&&200===o.status?o.data:(o&&"401"===o.status&&Object(n.a)("Your session has expired, please logout and login again."),null)},updateTeamScores:async(e,t,a)=>{let o=await Object(s.a)("/events/"+e+"/rounds/"+t+"/scores","PATCH",a);return o&&200===o.status?o.data:(o&&401===o.status?Object(n.a)("Your session has expired, please logout and login again."):Object(n.a)(o.message),null)},publishRoundLeaderboard:async(e,t)=>{let a=await Object(s.a)("/events/"+e+"/rounds/"+t+"/leaderboard","PATCH",{});return a&&200===a.status?a.data:(a&&401===a.status?Object(n.a)("Your session has expired, please logout and login again."):Object(n.a)(a.message),null)},updateSlotBias:async(e,t,a)=>{let o=await Object(s.a)("/events/"+e+"/rounds/"+t+"/bias","PATCH",a);return o&&200===o.status?o.data:(o&&401===o.status?Object(n.a)("Your session has expired, please logout and login again."):Object(n.a)(o.message),null)},backupScores:async(e,t,a,o)=>{try{let l=await Object(s.a)("/events/"+e+"/rounds/"+t+"/judges/"+a+"/backup","POST",o);return console.log({response:l}),!(!l||200!==l.status)||(l&&"401"===l.status?Object(n.a)("Your session has expired, please logout and login again."):Object(n.a)("Warning!: Failed to backup scores on server. Reason: "+l.message),!1)}catch(l){return console.log(l),Object(n.a)("Warning!: Failed to backup scores on server. Reason: "+l.message),!1}},getBackup:async(e,t,a)=>{try{let o=await Object(s.a)("/events/"+e+"/rounds/"+t+"/judges/"+a+"/backup","GET");return o&&200===o.status?o.data:(o&&"401"===o.status?Object(n.a)("Your session has expired, please logout and login again."):Object(n.a)("Failed to fetch backup, reason: "+o.message),!1)}catch(o){return Object(n.a)("Warning!: Failed to fetch backup. Reason: "+o.message),!1}},deleteBackup:async(e,t,a)=>{try{let o=await Object(s.a)("/events/"+e+"/rounds/"+t+"/judges/"+a+"/backup","DELETE");return!(!o||200!==o.status)||(o&&"401"===o.status?Object(n.a)("Your session has expired, please logout and login again."):Object(n.a)("Failed to delete backup, reason: "+o.message),!1)}catch(o){return Object(n.a)("Warning!: Failed to delete backup. Reason: "+o.message),!1}}}}}]);
//# sourceMappingURL=component---src-pages-board-jsx-e0eefa8e2add6a9ce69a.js.map